<div id="totais" hx-swap-oob="true" class="bg-white p-4 rounded shadow">
  {% include 'partials/totals.html' with context %}
</div>
<script>
  try {
    const url = "{{ recibo_url }}";
    const w = window.open(url, '_blank');
    if (w) {
      w.focus();
      // tenta imprimir após breve atraso para garantir renderização
      setTimeout(() => { try { w.print(); } catch (e) {} }, 500);
    }
  } catch (e) {
    console.error('Falha ao abrir/imprimir recibo:', e);
  }
</script>
